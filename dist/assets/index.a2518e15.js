const Ft=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const p of a)if(p.type==="childList")for(const u of p.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const p={};return a.integrity&&(p.integrity=a.integrity),a.referrerpolicy&&(p.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?p.credentials="include":a.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function s(a){if(a.ep)return;a.ep=!0;const p=r(a);fetch(a.href,p)}};Ft();function I(){}const je=e=>e;function ft(e){return e()}function Qe(){return Object.create(null)}function z(e){e.forEach(ft)}function Ce(e){return typeof e=="function"}function re(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let oe;function qe(e,t){return oe||(oe=document.createElement("a")),oe.href=t,e===oe.href}function Vt(e){return Object.keys(e).length===0}function Bt(e,...t){if(e==null)return I;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function pt(e){let t;return Bt(e,r=>t=r)(),t}const dt=typeof window!="undefined";let mt=dt?()=>window.performance.now():()=>Date.now(),Ue=dt?e=>requestAnimationFrame(e):I;const V=new Set;function vt(e){V.forEach(t=>{t.c(e)||(V.delete(t),t.f())}),V.size!==0&&Ue(vt)}function yt(e){let t;return V.size===0&&Ue(vt),{promise:new Promise(r=>{V.add(t={c:e,f:r})}),abort(){V.delete(t)}}}function T(e,t){e.appendChild(t)}function ht(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Nt(e){const t=P("style");return zt(ht(e),t),t.sheet}function zt(e,t){T(e.head||e,t)}function $(e,t,r){e.insertBefore(t,r||null)}function A(e){e.parentNode.removeChild(e)}function Ht(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function P(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function j(){return R(" ")}function gt(){return R("")}function ge(e,t,r,s){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r,s)}function g(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function Xt(e){return Array.from(e.childNodes)}function Se(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function wt(e,t,r=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,r,!1,t),s}const fe=new Map;let pe=0;function Gt(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}function Yt(e,t){const r={stylesheet:Nt(t),rules:{}};return fe.set(e,r),r}function _t(e,t,r,s,a,p,u,v=0){const d=16.666/s;let m=`{
`;for(let y=0;y<=1;y+=d){const w=t+(r-t)*p(y);m+=y*100+`%{${u(w,1-w)}}
`}const l=m+`100% {${u(r,1-r)}}
}`,c=`__svelte_${Gt(l)}_${v}`,n=ht(e),{stylesheet:o,rules:i}=fe.get(n)||Yt(n,e);i[c]||(i[c]=!0,o.insertRule(`@keyframes ${c} ${l}`,o.cssRules.length));const f=e.style.animation||"";return e.style.animation=`${f?`${f}, `:""}${c} ${s}ms linear ${a}ms 1 both`,pe+=1,c}function Le(e,t){const r=(e.style.animation||"").split(", "),s=r.filter(t?p=>p.indexOf(t)<0:p=>p.indexOf("__svelte")===-1),a=r.length-s.length;a&&(e.style.animation=s.join(", "),pe-=a,pe||Jt())}function Jt(){Ue(()=>{pe||(fe.forEach(e=>{const{stylesheet:t}=e;let r=t.cssRules.length;for(;r--;)t.deleteRule(r);e.rules={}}),fe.clear())})}let Z;function Q(e){Z=e}function ne(){if(!Z)throw new Error("Function called outside component initialization");return Z}function Me(e){ne().$$.on_mount.push(e)}function bt(e){ne().$$.on_destroy.push(e)}function Kt(){const e=ne();return(t,r)=>{const s=e.$$.callbacks[t];if(s){const a=wt(t,r);s.slice().forEach(p=>{p.call(e,a)})}}}function Qt(e,t){ne().$$.context.set(e,t)}function Zt(e){return ne().$$.context.get(e)}const K=[],de=[],ce=[],Ze=[],kt=Promise.resolve();let Ae=!1;function Dt(){Ae||(Ae=!0,kt.then(Et))}function er(){return Dt(),kt}function x(e){ce.push(e)}const De=new Set;let ie=0;function Et(){const e=Z;do{for(;ie<K.length;){const t=K[ie];ie++,Q(t),tr(t.$$)}for(Q(null),K.length=0,ie=0;de.length;)de.pop()();for(let t=0;t<ce.length;t+=1){const r=ce[t];De.has(r)||(De.add(r),r())}ce.length=0}while(K.length);for(;Ze.length;)Ze.pop()();Ae=!1,De.clear(),Q(e)}function tr(e){if(e.fragment!==null){e.update(),z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(x)}}let G;function Tt(){return G||(G=Promise.resolve(),G.then(()=>{G=null})),G}function me(e,t,r){e.dispatchEvent(wt(`${t?"intro":"outro"}${r}`))}const ue=new Set;let M;function rr(){M={r:0,c:[],p:M}}function nr(){M.r||z(M.c),M=M.p}function N(e,t){e&&e.i&&(ue.delete(e),e.i(t))}function ee(e,t,r,s){if(e&&e.o){if(ue.has(e))return;ue.add(e),M.c.push(()=>{ue.delete(e),s&&(r&&e.d(1),s())}),e.o(t)}}const Pt={duration:0};function qt(e,t,r){let s=t(e,r),a=!1,p,u,v=0;function d(){p&&Le(e,p)}function m(){const{delay:c=0,duration:n=300,easing:o=je,tick:i=I,css:f}=s||Pt;f&&(p=_t(e,0,1,n,c,o,f,v++)),i(0,1);const y=mt()+c,w=y+n;u&&u.abort(),a=!0,x(()=>me(e,!0,"start")),u=yt(h=>{if(a){if(h>=w)return i(1,0),me(e,!0,"end"),d(),a=!1;if(h>=y){const b=o((h-y)/n);i(b,1-b)}}return a})}let l=!1;return{start(){l||(l=!0,Le(e),Ce(s)?(s=s(),Tt().then(m)):m())},invalidate(){l=!1},end(){a&&(d(),a=!1)}}}function St(e,t,r){let s=t(e,r),a=!0,p;const u=M;u.r+=1;function v(){const{delay:d=0,duration:m=300,easing:l=je,tick:c=I,css:n}=s||Pt;n&&(p=_t(e,1,0,m,d,l,n));const o=mt()+d,i=o+m;x(()=>me(e,!1,"start")),yt(f=>{if(a){if(f>=i)return c(0,1),me(e,!1,"end"),--u.r||z(u.c),!1;if(f>=o){const y=l((f-o)/m);c(1-y,y)}}return a})}return Ce(s)?Tt().then(()=>{s=s(),v()}):v(),{end(d){d&&s.tick&&s.tick(1,0),a&&(p&&Le(e,p),a=!1)}}}function Re(e){e&&e.c()}function we(e,t,r,s){const{fragment:a,on_mount:p,on_destroy:u,after_update:v}=e.$$;a&&a.m(t,r),s||x(()=>{const d=p.map(ft).filter(Ce);u?u.push(...d):z(d),e.$$.on_mount=[]}),v.forEach(x)}function _e(e,t){const r=e.$$;r.fragment!==null&&(z(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function or(e,t){e.$$.dirty[0]===-1&&(K.push(e),Dt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function be(e,t,r,s,a,p,u,v=[-1]){const d=Z;Q(e);const m=e.$$={fragment:null,ctx:null,props:p,update:I,not_equal:a,bound:Qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:Qe(),dirty:v,skip_bound:!1,root:t.target||d.$$.root};u&&u(m.root);let l=!1;if(m.ctx=r?r(e,t.props||{},(c,n,...o)=>{const i=o.length?o[0]:n;return m.ctx&&a(m.ctx[c],m.ctx[c]=i)&&(!m.skip_bound&&m.bound[c]&&m.bound[c](i),l&&or(e,c)),n}):[],m.update(),l=!0,z(m.before_update),m.fragment=s?s(m.ctx):!1,t.target){if(t.hydrate){const c=Xt(t.target);m.fragment&&m.fragment.l(c),c.forEach(A)}else m.fragment&&m.fragment.c();t.intro&&N(e.$$.fragment),we(e,t.target,t.anchor,t.customElement),Et()}Q(d)}class ke{$destroy(){_e(this,1),this.$destroy=I}$on(t,r){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(r),()=>{const a=s.indexOf(r);a!==-1&&s.splice(a,1)}}$set(t){this.$$set&&!Vt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}try{self["workbox:window:6.5.1"]&&_()}catch{}function et(e,t){return new Promise(function(r){var s=new MessageChannel;s.port1.onmessage=function(a){r(a.data)},e.postMessage(t,[s.port2])})}function ir(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function tt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function sr(e,t){var r;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=function(a,p){if(a){if(typeof a=="string")return tt(a,p);var u=Object.prototype.toString.call(a).slice(8,-1);return u==="Object"&&a.constructor&&(u=a.constructor.name),u==="Map"||u==="Set"?Array.from(a):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?tt(a,p):void 0}}(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(r=e[Symbol.iterator]()).next.bind(r)}try{self["workbox:core:6.5.1"]&&_()}catch{}var Ee=function(){var e=this;this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r})};function Te(e,t){var r=location.href;return new URL(e,r).href===new URL(t,r).href}var Y=function(e,t){this.type=e,Object.assign(this,t)};function se(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function ar(){}var lr={type:"SKIP_WAITING"};function rt(e,t){if(!t)return e&&e.then?e.then(ar):Promise.resolve()}var cr=function(e){var t,r;function s(v,d){var m,l;return d===void 0&&(d={}),(m=e.call(this)||this).nn={},m.tn=0,m.rn=new Ee,m.en=new Ee,m.on=new Ee,m.un=0,m.an=new Set,m.cn=function(){var c=m.fn,n=c.installing;m.tn>0||!Te(n.scriptURL,m.sn.toString())||performance.now()>m.un+6e4?(m.vn=n,c.removeEventListener("updatefound",m.cn)):(m.hn=n,m.an.add(n),m.rn.resolve(n)),++m.tn,n.addEventListener("statechange",m.ln)},m.ln=function(c){var n=m.fn,o=c.target,i=o.state,f=o===m.vn,y={sw:o,isExternal:f,originalEvent:c};!f&&m.mn&&(y.isUpdate=!0),m.dispatchEvent(new Y(i,y)),i==="installed"?m.wn=self.setTimeout(function(){i==="installed"&&n.waiting===o&&m.dispatchEvent(new Y("waiting",y))},200):i==="activating"&&(clearTimeout(m.wn),f||m.en.resolve(o))},m.dn=function(c){var n=m.hn,o=n!==navigator.serviceWorker.controller;m.dispatchEvent(new Y("controlling",{isExternal:o,originalEvent:c,sw:n,isUpdate:m.mn})),o||m.on.resolve(n)},m.gn=(l=function(c){var n=c.data,o=c.ports,i=c.source;return se(m.getSW(),function(){m.an.has(i)&&m.dispatchEvent(new Y("message",{data:n,originalEvent:c,ports:o,sw:i}))})},function(){for(var c=[],n=0;n<arguments.length;n++)c[n]=arguments[n];try{return Promise.resolve(l.apply(this,c))}catch(o){return Promise.reject(o)}}),m.sn=v,m.nn=d,navigator.serviceWorker.addEventListener("message",m.gn),m}r=e,(t=s).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,p,u=s.prototype;return u.register=function(v){var d=(v===void 0?{}:v).immediate,m=d!==void 0&&d;try{var l=this;return function(c,n){var o=c();return o&&o.then?o.then(n):n(o)}(function(){if(!m&&document.readyState!=="complete")return rt(new Promise(function(c){return window.addEventListener("load",c)}))},function(){return l.mn=Boolean(navigator.serviceWorker.controller),l.yn=l.pn(),se(l.bn(),function(c){l.fn=c,l.yn&&(l.hn=l.yn,l.en.resolve(l.yn),l.on.resolve(l.yn),l.yn.addEventListener("statechange",l.ln,{once:!0}));var n=l.fn.waiting;return n&&Te(n.scriptURL,l.sn.toString())&&(l.hn=n,Promise.resolve().then(function(){l.dispatchEvent(new Y("waiting",{sw:n,wasWaitingBeforeRegister:!0}))}).then(function(){})),l.hn&&(l.rn.resolve(l.hn),l.an.add(l.hn)),l.fn.addEventListener("updatefound",l.cn),navigator.serviceWorker.addEventListener("controllerchange",l.dn),l.fn})})}catch(c){return Promise.reject(c)}},u.update=function(){try{return this.fn?rt(this.fn.update()):void 0}catch(v){return Promise.reject(v)}},u.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},u.messageSW=function(v){try{return se(this.getSW(),function(d){return et(d,v)})}catch(d){return Promise.reject(d)}},u.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&et(this.fn.waiting,lr)},u.pn=function(){var v=navigator.serviceWorker.controller;return v&&Te(v.scriptURL,this.sn.toString())?v:void 0},u.bn=function(){try{var v=this;return function(d,m){try{var l=d()}catch(c){return m(c)}return l&&l.then?l.then(void 0,m):l}(function(){return se(navigator.serviceWorker.register(v.sn,v.nn),function(d){return v.un=performance.now(),d})},function(d){throw d})}catch(d){return Promise.reject(d)}},a=s,(p=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&ir(a.prototype,p),s}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(r,s){this.Sn(r).add(s)},t.removeEventListener=function(r,s){this.Sn(r).delete(s)},t.dispatchEvent=function(r){r.target=this;for(var s,a=sr(this.Sn(r.type));!(s=a()).done;)(0,s.value)(r)},t.Sn=function(r){return this.Pn.has(r)||this.Pn.set(r,new Set),this.Pn.get(r)},e}());function ur(e={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:s,onRegistered:a,onRegisterError:p}=e;let u;const v=async(d=!0)=>{};return"serviceWorker"in navigator&&(u=new cr("/sw.js",{scope:"/",type:"classic"}),u.addEventListener("activated",d=>{d.isUpdate?window.location.reload():s==null||s()}),u.register({immediate:t}).then(d=>{a==null||a(d)}).catch(d=>{p==null||p(d)})),v}var te="/assets/llfs.b089f5f9.svg";/*! js-cookie v3.0.1 | MIT */function ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)e[s]=r[s]}return e}var fr={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function $e(e,t){function r(a,p,u){if(typeof document!="undefined"){u=ae({},t,u),typeof u.expires=="number"&&(u.expires=new Date(Date.now()+u.expires*864e5)),u.expires&&(u.expires=u.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var v="";for(var d in u)!u[d]||(v+="; "+d,u[d]!==!0&&(v+="="+u[d].split(";")[0]));return document.cookie=a+"="+e.write(p,a)+v}}function s(a){if(!(typeof document=="undefined"||arguments.length&&!a)){for(var p=document.cookie?document.cookie.split("; "):[],u={},v=0;v<p.length;v++){var d=p[v].split("="),m=d.slice(1).join("=");try{var l=decodeURIComponent(d[0]);if(u[l]=e.read(m,l),a===l)break}catch{}}return a?u[a]:u}}return Object.create({set:r,get:s,remove:function(a,p){r(a,"",ae({},p,{expires:-1}))},withAttributes:function(a){return $e(this.converter,ae({},this.attributes,a))},withConverter:function(a){return $e(ae({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var U=$e(fr,{path:"/"});function pr(){{const e=new URLSearchParams(window.location.hash.substring(1));if(e.has("access_token")&&e.has("expires_in")&&(U.set("token",e.get("access_token"),{sameSite:"Strict"}),U.set("expires_at",(Date.now()+parseInt(e.get("expires_in"))*1e3).toString(),{sameSite:"Strict"}),window.history.replaceState({},document.title,"/")),U.get("token")&&U.get("expires_at")&&U.get("expires_at")>Date.now().toString())return{token:U.get("token"),expiresAt:parseInt(U.get("expires_at"))}}}const dr="285cd29de87649a5b55bc8ad56734d44";function ve(e,{delay:t=0,duration:r=400,easing:s=je}={}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:s,css:p=>`opacity: ${p*a}`}}const F=[];function Lt(e,t=I){let r;const s=new Set;function a(v){if(re(e,v)&&(e=v,r)){const d=!F.length;for(const m of s)m[1](),F.push(m,e);if(d){for(let m=0;m<F.length;m+=2)F[m][0](F[m+1]);F.length=0}}}function p(v){a(v(e))}function u(v,d=I){const m=[v,d];return s.add(m),s.size===1&&(r=t(a)||I),v(e),()=>{s.delete(m),s.size===0&&(r(),r=null)}}return{set:a,update:p,subscribe:u}}var At={exports:{}};(function(e){var t=function(){var r="https://api.spotify.com/v1",s=null,a=null,p=function(n,o){return n.abort=o,n},u=function(n,o){var i;if(a!==null){var f=a.defer();n(function(y){f.resolve(y)},function(y){f.reject(y)}),i=f.promise}else window.Promise&&(i=new window.Promise(n));return i?new p(i,o):null},v=function(){var n=Array.prototype.slice.call(arguments),o=n[0],i=n.slice(1);return o=o||{},i.forEach(function(f){for(var y in f)f.hasOwnProperty(y)&&(o[y]=f[y])}),o},d=function(n,o){var i="";for(var f in o)if(o.hasOwnProperty(f)){var y=o[f];i+=encodeURIComponent(f)+"="+encodeURIComponent(y)+"&"}return i.length>0&&(i=i.substring(0,i.length-1),n=n+"?"+i),n},m=function(n,o){var i=new XMLHttpRequest,f=function(y,w){function h(k){y&&y(k),o&&o(null,k)}function b(){w&&w(i),o&&o(i,null)}var E=n.type||"GET";if(i.open(E,d(n.url,n.params)),s&&i.setRequestHeader("Authorization","Bearer "+s),i.onreadystatechange=function(){if(i.readyState===4){var k=null;try{k=i.responseText?JSON.parse(i.responseText):""}catch(S){console.error(S)}i.status>=200&&i.status<300?h(k):b()}},E==="GET")i.send(null);else{var D=null;n.postData&&(n.contentType==="image/jpeg"?(D=n.postData,i.setRequestHeader("Content-Type",n.contentType)):(D=JSON.stringify(n.postData),i.setRequestHeader("Content-Type","application/json"))),i.send(D)}};return o?(f(),null):u(f,function(){i.abort()})},l=function(n,o,i,f){var y={},w=null;typeof o=="object"?(y=o,w=i):typeof o=="function"&&(w=o);var h=n.type||"GET";return h!=="GET"&&n.postData&&!f?n.postData=v(n.postData,y):n.params=v(n.params,y),m(n,w)},c=function(){};return c.prototype={constructor:t},c.prototype.getGeneric=function(n,o){var i={url:n};return l(i,o)},c.prototype.getMe=function(n,o){var i={url:r+"/me"};return l(i,n,o)},c.prototype.getMySavedTracks=function(n,o){var i={url:r+"/me/tracks"};return l(i,n,o)},c.prototype.addToMySavedTracks=function(n,o,i){var f={url:r+"/me/tracks",type:"PUT",postData:n};return l(f,o,i)},c.prototype.removeFromMySavedTracks=function(n,o,i){var f={url:r+"/me/tracks",type:"DELETE",postData:n};return l(f,o,i)},c.prototype.containsMySavedTracks=function(n,o,i){var f={url:r+"/me/tracks/contains",params:{ids:n.join(",")}};return l(f,o,i)},c.prototype.getMySavedAlbums=function(n,o){var i={url:r+"/me/albums"};return l(i,n,o)},c.prototype.addToMySavedAlbums=function(n,o,i){var f={url:r+"/me/albums",type:"PUT",postData:n};return l(f,o,i)},c.prototype.removeFromMySavedAlbums=function(n,o,i){var f={url:r+"/me/albums",type:"DELETE",postData:n};return l(f,o,i)},c.prototype.containsMySavedAlbums=function(n,o,i){var f={url:r+"/me/albums/contains",params:{ids:n.join(",")}};return l(f,o,i)},c.prototype.getMyTopArtists=function(n,o){var i={url:r+"/me/top/artists"};return l(i,n,o)},c.prototype.getMyTopTracks=function(n,o){var i={url:r+"/me/top/tracks"};return l(i,n,o)},c.prototype.getMyRecentlyPlayedTracks=function(n,o){var i={url:r+"/me/player/recently-played"};return l(i,n,o)},c.prototype.followUsers=function(n,o){var i={url:r+"/me/following/",type:"PUT",params:{ids:n.join(","),type:"user"}};return l(i,o)},c.prototype.followArtists=function(n,o){var i={url:r+"/me/following/",type:"PUT",params:{ids:n.join(","),type:"artist"}};return l(i,o)},c.prototype.followPlaylist=function(n,o,i){var f={url:r+"/playlists/"+n+"/followers",type:"PUT",postData:{}};return l(f,o,i)},c.prototype.unfollowUsers=function(n,o){var i={url:r+"/me/following/",type:"DELETE",params:{ids:n.join(","),type:"user"}};return l(i,o)},c.prototype.unfollowArtists=function(n,o){var i={url:r+"/me/following/",type:"DELETE",params:{ids:n.join(","),type:"artist"}};return l(i,o)},c.prototype.unfollowPlaylist=function(n,o){var i={url:r+"/playlists/"+n+"/followers",type:"DELETE"};return l(i,o)},c.prototype.isFollowingUsers=function(n,o){var i={url:r+"/me/following/contains",type:"GET",params:{ids:n.join(","),type:"user"}};return l(i,o)},c.prototype.isFollowingArtists=function(n,o){var i={url:r+"/me/following/contains",type:"GET",params:{ids:n.join(","),type:"artist"}};return l(i,o)},c.prototype.areFollowingPlaylist=function(n,o,i){var f={url:r+"/playlists/"+n+"/followers/contains",type:"GET",params:{ids:o.join(",")}};return l(f,i)},c.prototype.getFollowedArtists=function(n,o){var i={url:r+"/me/following",type:"GET",params:{type:"artist"}};return l(i,n,o)},c.prototype.getUser=function(n,o,i){var f={url:r+"/users/"+encodeURIComponent(n)};return l(f,o,i)},c.prototype.getUserPlaylists=function(n,o,i){var f;return typeof n=="string"?f={url:r+"/users/"+encodeURIComponent(n)+"/playlists"}:(f={url:r+"/me/playlists"},i=o,o=n),l(f,o,i)},c.prototype.getPlaylist=function(n,o,i){var f={url:r+"/playlists/"+n};return l(f,o,i)},c.prototype.getPlaylistTracks=function(n,o,i){var f={url:r+"/playlists/"+n+"/tracks"};return l(f,o,i)},c.prototype.getPlaylistCoverImage=function(n,o){var i={url:r+"/playlists/"+n+"/images"};return l(i,o)},c.prototype.createPlaylist=function(n,o,i){var f={url:r+"/users/"+encodeURIComponent(n)+"/playlists",type:"POST",postData:o};return l(f,o,i)},c.prototype.changePlaylistDetails=function(n,o,i){var f={url:r+"/playlists/"+n,type:"PUT",postData:o};return l(f,o,i)},c.prototype.addTracksToPlaylist=function(n,o,i,f){var y={url:r+"/playlists/"+n+"/tracks",type:"POST",postData:{uris:o}};return l(y,i,f,!0)},c.prototype.replaceTracksInPlaylist=function(n,o,i){var f={url:r+"/playlists/"+n+"/tracks",type:"PUT",postData:{uris:o}};return l(f,{},i)},c.prototype.reorderTracksInPlaylist=function(n,o,i,f,y){var w={url:r+"/playlists/"+n+"/tracks",type:"PUT",postData:{range_start:o,insert_before:i}};return l(w,f,y)},c.prototype.removeTracksFromPlaylist=function(n,o,i){var f=o.map(function(w){return typeof w=="string"?{uri:w}:w}),y={url:r+"/playlists/"+n+"/tracks",type:"DELETE",postData:{tracks:f}};return l(y,{},i)},c.prototype.removeTracksFromPlaylistWithSnapshotId=function(n,o,i,f){var y=o.map(function(h){return typeof h=="string"?{uri:h}:h}),w={url:r+"/playlists/"+n+"/tracks",type:"DELETE",postData:{tracks:y,snapshot_id:i}};return l(w,{},f)},c.prototype.removeTracksFromPlaylistInPositions=function(n,o,i,f){var y={url:r+"/playlists/"+n+"/tracks",type:"DELETE",postData:{positions:o,snapshot_id:i}};return l(y,{},f)},c.prototype.uploadCustomPlaylistCoverImage=function(n,o,i){var f={url:r+"/playlists/"+n+"/images",type:"PUT",postData:o.replace(/^data:image\/jpeg;base64,/,""),contentType:"image/jpeg"};return l(f,{},i)},c.prototype.getAlbum=function(n,o,i){var f={url:r+"/albums/"+n};return l(f,o,i)},c.prototype.getAlbumTracks=function(n,o,i){var f={url:r+"/albums/"+n+"/tracks"};return l(f,o,i)},c.prototype.getAlbums=function(n,o,i){var f={url:r+"/albums/",params:{ids:n.join(",")}};return l(f,o,i)},c.prototype.getTrack=function(n,o,i){var f={};return f.url=r+"/tracks/"+n,l(f,o,i)},c.prototype.getTracks=function(n,o,i){var f={url:r+"/tracks/",params:{ids:n.join(",")}};return l(f,o,i)},c.prototype.getArtist=function(n,o,i){var f={url:r+"/artists/"+n};return l(f,o,i)},c.prototype.getArtists=function(n,o,i){var f={url:r+"/artists/",params:{ids:n.join(",")}};return l(f,o,i)},c.prototype.getArtistAlbums=function(n,o,i){var f={url:r+"/artists/"+n+"/albums"};return l(f,o,i)},c.prototype.getArtistTopTracks=function(n,o,i,f){var y={url:r+"/artists/"+n+"/top-tracks",params:{country:o}};return l(y,i,f)},c.prototype.getArtistRelatedArtists=function(n,o,i){var f={url:r+"/artists/"+n+"/related-artists"};return l(f,o,i)},c.prototype.getFeaturedPlaylists=function(n,o){var i={url:r+"/browse/featured-playlists"};return l(i,n,o)},c.prototype.getNewReleases=function(n,o){var i={url:r+"/browse/new-releases"};return l(i,n,o)},c.prototype.getCategories=function(n,o){var i={url:r+"/browse/categories"};return l(i,n,o)},c.prototype.getCategory=function(n,o,i){var f={url:r+"/browse/categories/"+n};return l(f,o,i)},c.prototype.getCategoryPlaylists=function(n,o,i){var f={url:r+"/browse/categories/"+n+"/playlists"};return l(f,o,i)},c.prototype.search=function(n,o,i,f){var y={url:r+"/search/",params:{q:n,type:o.join(",")}};return l(y,i,f)},c.prototype.searchAlbums=function(n,o,i){return this.search(n,["album"],o,i)},c.prototype.searchArtists=function(n,o,i){return this.search(n,["artist"],o,i)},c.prototype.searchTracks=function(n,o,i){return this.search(n,["track"],o,i)},c.prototype.searchPlaylists=function(n,o,i){return this.search(n,["playlist"],o,i)},c.prototype.searchShows=function(n,o,i){return this.search(n,["show"],o,i)},c.prototype.searchEpisodes=function(n,o,i){return this.search(n,["episode"],o,i)},c.prototype.getAudioFeaturesForTrack=function(n,o){var i={};return i.url=r+"/audio-features/"+n,l(i,{},o)},c.prototype.getAudioFeaturesForTracks=function(n,o){var i={url:r+"/audio-features",params:{ids:n}};return l(i,{},o)},c.prototype.getAudioAnalysisForTrack=function(n,o){var i={};return i.url=r+"/audio-analysis/"+n,l(i,{},o)},c.prototype.getRecommendations=function(n,o){var i={url:r+"/recommendations"};return l(i,n,o)},c.prototype.getAvailableGenreSeeds=function(n){var o={url:r+"/recommendations/available-genre-seeds"};return l(o,{},n)},c.prototype.getMyDevices=function(n){var o={url:r+"/me/player/devices"};return l(o,{},n)},c.prototype.getMyCurrentPlaybackState=function(n,o){var i={url:r+"/me/player"};return l(i,n,o)},c.prototype.getMyCurrentPlayingTrack=function(n,o){var i={url:r+"/me/player/currently-playing"};return l(i,n,o)},c.prototype.transferMyPlayback=function(n,o,i){var f=o||{};f.device_ids=n;var y={type:"PUT",url:r+"/me/player",postData:f};return l(y,o,i)},c.prototype.play=function(n,o){n=n||{};var i="device_id"in n?{device_id:n.device_id}:null,f={};["context_uri","uris","offset","position_ms"].forEach(function(h){h in n&&(f[h]=n[h])});var y={type:"PUT",url:r+"/me/player/play",params:i,postData:f},w=typeof n=="function"?n:{};return l(y,w,o)},c.prototype.queue=function(n,o,i){o=o||{};var f="device_id"in o?{uri:n,device_id:o.device_id}:{uri:n},y={type:"POST",url:r+"/me/player/queue",params:f};return l(y,o,i)},c.prototype.pause=function(n,o){n=n||{};var i="device_id"in n?{device_id:n.device_id}:null,f={type:"PUT",url:r+"/me/player/pause",params:i};return l(f,n,o)},c.prototype.skipToNext=function(n,o){n=n||{};var i="device_id"in n?{device_id:n.device_id}:null,f={type:"POST",url:r+"/me/player/next",params:i};return l(f,n,o)},c.prototype.skipToPrevious=function(n,o){n=n||{};var i="device_id"in n?{device_id:n.device_id}:null,f={type:"POST",url:r+"/me/player/previous",params:i};return l(f,n,o)},c.prototype.seek=function(n,o,i){o=o||{};var f={position_ms:n};"device_id"in o&&(f.device_id=o.device_id);var y={type:"PUT",url:r+"/me/player/seek",params:f};return l(y,o,i)},c.prototype.setRepeat=function(n,o,i){o=o||{};var f={state:n};"device_id"in o&&(f.device_id=o.device_id);var y={type:"PUT",url:r+"/me/player/repeat",params:f};return l(y,o,i)},c.prototype.setVolume=function(n,o,i){o=o||{};var f={volume_percent:n};"device_id"in o&&(f.device_id=o.device_id);var y={type:"PUT",url:r+"/me/player/volume",params:f};return l(y,o,i)},c.prototype.setShuffle=function(n,o,i){o=o||{};var f={state:n};"device_id"in o&&(f.device_id=o.device_id);var y={type:"PUT",url:r+"/me/player/shuffle",params:f};return l(y,o,i)},c.prototype.getShow=function(n,o,i){var f={};return f.url=r+"/shows/"+n,l(f,o,i)},c.prototype.getShows=function(n,o,i){var f={url:r+"/shows/",params:{ids:n.join(",")}};return l(f,o,i)},c.prototype.getMySavedShows=function(n,o){var i={url:r+"/me/shows"};return l(i,n,o)},c.prototype.addToMySavedShows=function(n,o,i){var f={url:r+"/me/shows",type:"PUT",postData:n};return l(f,o,i)},c.prototype.removeFromMySavedShows=function(n,o,i){var f={url:r+"/me/shows",type:"DELETE",postData:n};return l(f,o,i)},c.prototype.containsMySavedShows=function(n,o,i){var f={url:r+"/me/shows/contains",params:{ids:n.join(",")}};return l(f,o,i)},c.prototype.getShowEpisodes=function(n,o,i){var f={url:r+"/shows/"+n+"/episodes"};return l(f,o,i)},c.prototype.getEpisode=function(n,o,i){var f={};return f.url=r+"/episodes/"+n,l(f,o,i)},c.prototype.getEpisodes=function(n,o,i){var f={url:r+"/episodes/",params:{ids:n.join(",")}};return l(f,o,i)},c.prototype.getAccessToken=function(){return s},c.prototype.setAccessToken=function(n){s=n},c.prototype.setPromiseImplementation=function(n){var o=!1;try{var i=new n(function(f){f()});typeof i.then=="function"&&typeof i.catch=="function"&&(o=!0)}catch(f){console.error(f)}if(o)a=n;else throw new Error("Unsupported implementation of Promises/A+")},c}();e.exports=t})(At);var mr=At.exports,vr="/assets/fullscreen.91da601f.svg",yr="/assets/close_fullscreen.7d3d3ee4.svg";function $t(e){var r,s;const t=Date.now()-((r=e==null?void 0:e.timestamp)!=null?r:Date.now());return((s=e==null?void 0:e.progress_ms)!=null?s:0)+(e!=null&&e.is_playing?t:0)}function hr(e){var t;return $t(e)-((t=e==null?void 0:e.item)==null?void 0:t.duration_ms)}function gr(e,t,r){e.progress_ms=r,t.set(e)}let J;async function wr(e){if(localStorage){const t=JSON.parse(localStorage.getItem(e));if(_r!=null)return t}return It(e)}async function It(e){try{J&&await J,J=fetch("https://cors-anywhere.herokuapp.com/https://api.textyl.co/api/lyrics?"+new URLSearchParams({q:e}).toString(),{mode:"cors"});const t=await J;if(J=void 0,!t.ok)return console.error(t),t.status===403?403:null;const r=await t.json();return localStorage&&localStorage.setItem(e,JSON.stringify(r)),r}catch(t){return console.log(t),null}}async function _r(e){if(!!localStorage&&localStorage.getItem(e)===null){const t=await It(e);Array.isArray(t)&&localStorage.setItem(e,JSON.stringify(t))}}const jt=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function br(e,t){this.scrollLeft=e,this.scrollTop=t}const Ct=(e,t,r="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${r}`,Ut=(e,t,r)=>Ct(e,t,`The provided value '${r}' is not a valid enum value of type ScrollBehavior.`),ye=(e,t,r)=>{var s;const a=`__SEAMLESS.BACKUP$${t}`;return!e[a]&&e[t]&&!(!((s=e[t])===null||s===void 0)&&s.__isPolyfill)&&(e[a]=e[t]),e[a]||r},Mt=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},kr=()=>"scrollBehavior"in window.document.documentElement.style,Dr=e=>{Object.defineProperty(e,"__isPolyfill",{value:!0})},Er=(e,t)=>{Dr(t),[HTMLElement.prototype,SVGElement.prototype,Element.prototype].forEach(r=>{ye(r,e),r[e]=t})},xe=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement,Tr=e=>.5*(1-Math.cos(Math.PI*e));function We(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),We=t,t()}const Pr=500,Rt=e=>{const r=(We()-e.timeStamp)/(e.duration||Pr);if(r>1){e.method(e.targetX,e.targetY),e.callback();return}const s=(e.timingFunc||Tr)(r),a=e.startX+(e.targetX-e.startX)*s,p=e.startY+(e.targetY-e.startY)*s;e.method(a,p),e.rafId=window.requestAnimationFrame(()=>{Rt(e)})},he=e=>isFinite(e)?Number(e):0,qr=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},Sr=(e,t,r)=>{var s,a;if(!qr(e))return;const p=e.scrollLeft,u=e.scrollTop,v=he((s=t.left)!==null&&s!==void 0?s:p),d=he((a=t.top)!==null&&a!==void 0?a:u);if(v===p&&d===u)return;const m=ye(HTMLElement.prototype,"scroll",br),l=ye(Object.getPrototypeOf(e),"scroll",m).bind(e);if(t.behavior!=="smooth"){l(v,d);return}const c=()=>{window.removeEventListener("wheel",o),window.removeEventListener("touchmove",o)},n=Object.assign(Object.assign({},r),{timeStamp:We(),startX:p,startY:u,targetX:v,targetY:d,rafId:0,method:l,callback:c}),o=()=>{window.cancelAnimationFrame(n.rafId),c()};window.addEventListener("wheel",o,{passive:!0,once:!0}),window.addEventListener("touchmove",o,{passive:!0,once:!0}),Rt(n)},Lr=e=>e.window===e,Ar=e=>(t,r,s)=>{const[a,p]=Lr(t)?[xe(t.document.documentElement),"Window"]:[t,"Element"],u=r!=null?r:{};if(!Mt(u))throw new TypeError(Ct(e,p));if(!jt(u.behavior))throw new TypeError(Ut(e,p,u.behavior));e==="scrollBy"&&(u.left=he(u.left)+a.scrollLeft,u.top=he(u.top)+a.scrollTop),Sr(a,u,s)},$r=Ar("scroll"),Ir=$r,xt=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},Wt=(e,t,r,s)=>{let a=0;switch(t||(a^=2),e){case 0:a=a>>1|(a&1)<<1,[r,s]=[s,r];break;case 1:case 3:a^=1;break;case 4:a^=2;break}return[a,r,s]},jr=e=>(Wt(xt(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,Cr=(e,t,r)=>{const[s,a,p]=Wt(t,r,e.block||"start",e.inline||"nearest");return[a,p].map((u,v)=>{switch(u){case"center":return 1;case"nearest":return 0;default:{const d=s>>v&1;return u==="start"==!d?2:3}}})},nt=(e,t,r,s,a,p,u)=>e!==0?e:a<t&&p>r||a>t&&p<r?null:a<=t&&u<=s||p>=r&&u>=s?2:p>r&&u<s||a<t&&u>s?3:null,ot=e=>e!=="visible"&&e!=="clip",Ur=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},Mr=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?ot(t.overflowY)||ot(t.overflowX)||e===xe(e):!1,it=e=>{const t=e.parentNode,r=e.parentElement;if(r===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return Ur(e)}return r},Pe=(e,t,r)=>e<t?t:e>r?r:e,Rr=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],xr=(e,t,r)=>{const{top:s,right:a,bottom:p,left:u}=t,v=Rr(e.ownerDocument);if(!v)return[s,a,p,u];const d=m=>{const l=r.getPropertyValue(`${v}-${m}`);return parseInt(l,10)||0};return[s-d("top"),a+d("right"),p+d("bottom"),u-d("left")]},le=(e,t,r)=>{switch(e){case 1:return(t+r)/2;case 3:return r;case 2:case 0:return t}},Wr=(e,t)=>{var r,s,a;const p=(r=e.ownerDocument.defaultView)===null||r===void 0?void 0:r.visualViewport,[u,v,d,m]=e===xe(e)?[0,0,(s=p==null?void 0:p.width)!==null&&s!==void 0?s:e.clientWidth,(a=p==null?void 0:p.height)!==null&&a!==void 0?a:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],l=u+e.clientLeft,c=v+e.clientTop,n=l+d,o=c+m;return[c,n,o,l]},Or=(e,t)=>{const r=[];let s=e.ownerDocument,a=s.defaultView;if(!a)return r;const p=window.getComputedStyle(e),u=p.direction!=="rtl",v=xt(p.writingMode||p.getPropertyValue("-webkit-writing-mode")||p.getPropertyValue("-ms-writing-mode")),[d,m]=Cr(t,v,u);let[l,c,n,o]=xr(e,e.getBoundingClientRect(),p);for(let i=it(e);i!==null;i=it(i)){if(s!==i.ownerDocument){if(s=i.ownerDocument,a=s.defaultView,!a)break;const{left:H,top:X}=i.getBoundingClientRect();l+=X,c+=H,n+=X,o+=H}const f=a.getComputedStyle(i);if(f.position==="fixed")break;if(!Mr(i,f))continue;const y=i.getBoundingClientRect(),[w,h,b,E]=Wr(i,y),D=nt(d,E,h,i.clientWidth,o,c,c-o),k=nt(m,w,b,i.clientHeight,l,n,n-l),S=D===null?0:le(D,o,c)-le(D,E,h),C=k===null?0:le(k,l,n)-le(k,w,b),q=jr(f)?Pe(S,-i.scrollWidth+i.clientWidth-i.scrollLeft,-i.scrollLeft):Pe(S,-i.scrollLeft,i.scrollWidth-i.clientWidth-i.scrollLeft),W=Pe(C,-i.scrollTop,i.scrollHeight-i.clientHeight-i.scrollTop);r.push([i,{left:i.scrollLeft+q,top:i.scrollTop+W,behavior:t.behavior}]),l=Math.max(l-W,w),c=Math.min(c-q,h),n=Math.min(n-W,b),o=Math.max(o-q,E)}return r},Fr=(e,t,r)=>{const s=t||{};if(!jt(s.behavior))throw new TypeError(Ut("scrollIntoView","Element",s.behavior));Or(e,s).forEach(([p,u])=>{Ir(p,u,r)})},Ot=Fr;function Vr(e){Ot(this,{block:e==null||e?"start":"end",inline:"nearest"})}const Br=e=>{if(kr())return;const t=ye(window.HTMLElement.prototype,"scrollIntoView",Vr);Er("scrollIntoView",function(){const s=arguments,a=s[0];if(s.length===1&&Mt(a)){Ot(this,a,e);return}t.apply(this,s)})};function Nr(e){return e=e.filter(t=>t!=null),new Promise(t=>{const r=new IntersectionObserver(s=>{for(const a of s)r.unobserve(a.target),e.splice(e.indexOf(a.target),1),a.isIntersecting&&(r.disconnect(),t(!0));e.length===0&&t(!1)});for(const s of e)r.observe(s)})}function st(e,t,r){const s=e.slice();return s[15]=t[r],s[17]=r,s}function zr(e){let t,r=e[1],s=[];for(let a=0;a<r.length;a+=1)s[a]=at(st(e,r,a));return{c(){for(let a=0;a<s.length;a+=1)s[a].c();t=gt()},m(a,p){for(let u=0;u<s.length;u+=1)s[u].m(a,p);$(a,t,p)},p(a,p){if(p&18){r=a[1];let u;for(u=0;u<r.length;u+=1){const v=st(a,r,u);s[u]?s[u].p(v,p):(s[u]=at(v),s[u].c(),s[u].m(t.parentNode,t))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}},d(a){Ht(s,a),a&&A(t)}}}function Hr(e){let t,r,s,a,p,u,v;return{c(){t=P("span"),t.textContent="Can't access lyrics database",r=j(),s=P("a"),s.textContent="Enable access",a=j(),p=P("button"),p.textContent="Try again",g(t,"class","line svelte-pm5j2w"),g(s,"class","line svelte-pm5j2w"),g(s,"href","http://cors-anywhere.herokuapp.com/"),g(s,"rel","noreferrer noopener"),g(s,"target","_blank"),g(p,"class","line svelte-pm5j2w")},m(d,m){$(d,t,m),$(d,r,m),$(d,s,m),$(d,a,m),$(d,p,m),u||(v=ge(p,"click",e[6]),u=!0)},p:I,d(d){d&&A(t),d&&A(r),d&&A(s),d&&A(a),d&&A(p),u=!1,v()}}}function Xr(e){let t;return{c(){t=P("span"),t.textContent="Loading...",g(t,"class","line active svelte-pm5j2w")},m(r,s){$(r,t,s)},p:I,d(r){r&&A(t)}}}function Gr(e){let t,r,s,a,p;return{c(){var u,v,d,m,l;t=P("span"),t.textContent="No live lyrics available",r=j(),s=P("a"),a=R("View on Genius instead"),g(t,"class","line svelte-pm5j2w"),g(s,"class","line svelte-pm5j2w"),g(s,"href",p="https://genius.com/"+(((d=(v=(u=e[0])==null?void 0:u.item)==null?void 0:v.artists)==null?void 0:d.map(lt).join(" "))+" "+((l=(m=e[0])==null?void 0:m.item)==null?void 0:l.name)).replaceAll(/\s/gm,"-")+"-lyrics"),g(s,"target","_blank"),g(s,"rel","noreferrer noopener")},m(u,v){$(u,t,v),$(u,r,v),$(u,s,v),T(s,a)},p(u,v){var d,m,l,c,n;v&1&&p!==(p="https://genius.com/"+(((l=(m=(d=u[0])==null?void 0:d.item)==null?void 0:m.artists)==null?void 0:l.map(lt).join(" "))+" "+((n=(c=u[0])==null?void 0:c.item)==null?void 0:n.name)).replaceAll(/\s/gm,"-")+"-lyrics")&&g(s,"href",p)},d(u){u&&A(t),u&&A(r),u&&A(s)}}}function Yr(e){let t;return{c(){t=P("span"),t.textContent="Start playing something on Spotify to see the lyrics",g(t,"class","line svelte-pm5j2w")},m(r,s){$(r,t,s)},p:I,d(r){r&&A(t)}}}function at(e){let t,r=e[15].lyrics+"",s,a,p,u;return{c(){t=P("span"),s=R(r),g(t,"class","line svelte-pm5j2w"),g(t,"id",a="line-"+e[17].toString())},m(v,d){$(v,t,d),T(t,s),p||(u=ge(t,"click",e[4]),p=!0)},p(v,d){d&2&&r!==(r=v[15].lyrics+"")&&Se(s,r)},d(v){v&&A(t),p=!1,u()}}}function Jr(e){let t;function r(p,u){var v;return(v=p[0])!=null&&v.item?p[1]==null?Gr:p[1]==""?Xr:p[1]==403?Hr:zr:Yr}let s=r(e),a=s(e);return{c(){t=P("article"),a.c(),g(t,"id","lines-list"),g(t,"class","svelte-pm5j2w")},m(p,u){$(p,t,u),a.m(t,null),e[7](t)},p(p,[u]){s===(s=r(p))&&a?a.p(p,u):(a.d(1),a=s(p),a&&(a.c(),a.m(t,null)))},i:I,o:I,d(p){p&&A(t),a.d(),e[7](null)}}}const lt=e=>e.name;function Kr(e,t,r){Br();let s;const a=Kt();let{pbs:p}=t,u,v=null,d;async function m(h){var E,D,k,S,C;if(h===void 0)return;const b=((E=h==null?void 0:h.item)==null?void 0:E.id)!==v||(h==null?void 0:h.is_playing)&&!(u!=null&&u.is_playing)||d===403;r(0,u=h),b&&(r(1,d=""),v=(D=u==null?void 0:u.item)==null?void 0:D.id,r(1,d=await wr(((k=u==null?void 0:u.item)==null?void 0:k.name)+" "+((C=(S=u==null?void 0:u.item)==null?void 0:S.artists)==null?void 0:C.map(q=>q.name).join(", ")))),console.log(d)),er().then(()=>c(b))}m(pt(p)),p.subscribe(m);let l;async function c(h=!1){if(l==null&&(console.warn("linesList == null"),r(2,l=document.getElementById("lines-list")),l==null)){console.warn("linesList not found by id");return}if(d==null||d==""||d===403)return;const b=$t(u),E=Math.floor(b/1e3),D=d.findIndex((C,q)=>C.seconds<=E&&(q+1>=d.length||d[q+1].seconds>E)),k=l.getElementsByClassName("active")[0];if(k!=null){if(parseInt(k.id.substring(5))==D)return n(D,b,d);k.classList.remove("active")}if(D==-1)return n(D,b,d);const S=document.getElementById("line-"+D);S!=null&&(S.classList.add("active"),(h||await Nr([S,k]))&&S.scrollIntoView({behavior:"smooth",block:"center"})),n(D,b,d)}function n(h,b,E){if(h<E.length-1){s!=null&&window.clearTimeout(s);const D=Math.max(E[h+1].seconds*1e3-b,1);s=window.setTimeout(c,D)}}function o(){if(l==null&&(r(2,l=document.getElementById("lines-list")),l==null))return;const h=l.getElementsByClassName("active")[0];h!=null&&h.scrollIntoView({behavior:"smooth",block:"center"})}function i(){document.visibilityState!=="hidden"&&o()}Me(()=>{c(),document.addEventListener("visibilitychange",i),document.addEventListener("fullscreenchange",i),window.addEventListener("resize",i)}),bt(()=>{console.warn("Lyrics destroyed"),s!=null&&window.clearTimeout(s),document.removeEventListener("visibilitychange",i),document.removeEventListener("fullscreenchange",i),window.removeEventListener("resize",i)});function f(h){var k;const b=h.currentTarget;if(!b.id.startsWith("line-"))return;const E=parseInt(b.id.substring(5));if(!Array.isArray(d)||E<0||E>=d.length)return;const D=((k=d[E])==null?void 0:k.seconds)*1e3;a("skip",D)}const y=()=>{m(u)};function w(h){de[h?"unshift":"push"](()=>{l=h,r(2,l)})}return e.$$set=h=>{"pbs"in h&&r(5,p=h.pbs)},[u,d,l,m,f,p,y,w]}class Qr extends ke{constructor(t){super(),be(this,t,Kr,Jr,re,{pbs:5})}}const Zr="wakeLock"in navigator;let B=null;function en(){Ie(),document.addEventListener("visibilitychange",Ie)}function tn(){document.removeEventListener("visibilitychange",Ie),B!=null&&(B.release(),B=null)}async function Ie(){Zr&&(B==null||B.released)&&document.visibilityState==="visible"&&(B=await navigator.wakeLock.request("screen"))}function ct(e){let t,r,s;return{c(){var a;t=P("div"),r=P("aside"),g(r,"class","background-cover svelte-mzf9no"),g(r,"style",s=`--img:url("${(a=e[0])!=null?a:te}");`),g(t,"class","background-cover svelte-mzf9no")},m(a,p){$(a,t,p),T(t,r)},p(a,p){var u;p&1&&s!==(s=`--img:url("${(u=a[0])!=null?u:te}");`)&&g(r,"style",s)},d(a){a&&A(t)}}}function rn(e){var W,H,X,Oe,Fe,Ve,Be;let t,r,s,a,p,u,v,d,m=((X=(H=(W=e[1])==null?void 0:W.item)==null?void 0:H.name)!=null?X:"No playback")+"",l,c,n,o=((Be=(Ve=(Fe=(Oe=e[1])==null?void 0:Oe.item)==null?void 0:Fe.artists)==null?void 0:Ve.map(ut).join(" & "))!=null?Be:"Live Lyrics for Spotify")+"",i,f,y,w,h,b,E,D,k,S,C;h=new Qr({props:{pbs:e[4]}}),h.$on("skip",e[5]);let q=(e[0]||e[3])&&ct(e);return{c(){var L;t=P("main"),r=P("section"),s=P("header"),a=P("img"),u=j(),v=P("div"),d=P("h1"),l=R(m),c=j(),n=P("h2"),i=R(o),f=j(),y=P("button"),w=j(),Re(h.$$.fragment),b=j(),q&&q.c(),g(a,"class","album-art svelte-mzf9no"),g(a,"alt","Album art"),qe(a.src,p=(L=e[0])!=null?L:te)||g(a,"src",p),g(d,"class","song-name svelte-mzf9no"),g(n,"class","artist-name svelte-mzf9no"),g(v,"class","name-info svelte-mzf9no"),g(y,"class","fullscreen-toggle svelte-mzf9no"),g(y,"style",`--open:url("${vr}");--close:url("${yr}");`),g(s,"class","svelte-mzf9no"),g(r,"class","main-section svelte-mzf9no"),g(t,"class","svelte-mzf9no")},m(L,O){$(L,t,O),T(t,r),T(r,s),T(s,a),T(s,u),T(s,v),T(v,d),T(d,l),T(v,c),T(v,n),T(n,i),T(s,f),T(s,y),T(r,w),we(h,r,null),T(t,b),q&&q.m(t,null),e[7](t),k=!0,S||(C=ge(y,"click",e[6]),S=!0)},p(L,[O]){var Ne,ze,He,Xe,Ge,Ye,Je,Ke;(!k||O&1&&!qe(a.src,p=(Ne=L[0])!=null?Ne:te))&&g(a,"src",p),(!k||O&2)&&m!==(m=((Xe=(He=(ze=L[1])==null?void 0:ze.item)==null?void 0:He.name)!=null?Xe:"No playback")+"")&&Se(l,m),(!k||O&2)&&o!==(o=((Ke=(Je=(Ye=(Ge=L[1])==null?void 0:Ge.item)==null?void 0:Ye.artists)==null?void 0:Je.map(ut).join(" & "))!=null?Ke:"Live Lyrics for Spotify")+"")&&Se(i,o),L[0]||L[3]?q?q.p(L,O):(q=ct(L),q.c(),q.m(t,null)):q&&(q.d(1),q=null)},i(L){k||(N(h.$$.fragment,L),x(()=>{D&&D.end(1),E=qt(t,ve,{duration:250,delay:250}),E.start()}),k=!0)},o(L){ee(h.$$.fragment,L),E&&E.invalidate(),D=St(t,ve,{duration:250,delay:0}),k=!1},d(L){L&&A(t),_e(h),q&&q.d(),e[7](null),L&&D&&D.end(),S=!1,C()}}}const ut=e=>e.name;function nn(e,t,r){const s=Zt("auth_data"),a=pt(s),p=new mr;p.setAccessToken(a.token);let u,v;const d=Lt(v);let m;Me(()=>{en(),c()}),bt(()=>{m!=null&&window.clearInterval(m),tn()});let l=!1;async function c(h=!1){var b,E,D;if(!l||h){try{const S=Date.now();if(r(1,v=await p.getMyCurrentPlaybackState()),h&&(l=!1),l)return;v!=null&&v!=""&&r(1,v.timestamp=Date.now()-Math.floor((Date.now()-S)/2),v),r(0,u=(D=(E=(b=v==null?void 0:v.item)==null?void 0:b.album)==null?void 0:E.images[0])==null?void 0:D.url),l||d.set(v)}catch(S){console.error(S),s.set(void 0)}const k=hr(v);m=window.setTimeout(c,Math.min(k>0&&(v==null?void 0:v.is_playing)?k:5e3,5e3))}}function n(h){o(h.detail,!0)}function o(h,b=!1){gr(v,d,h),r(1,v.is_playing=!1,v),l=!0,p.seek(h).then(async()=>{b&&!v.is_playing&&await p.play(),c(!0)})}let i,f=document.fullscreenElement!=null;async function y(){document.fullscreenElement?await(document==null?void 0:document.exitFullscreen()):await(i==null?void 0:i.requestFullscreen()),r(3,f=document.fullscreenElement!=null)}function w(h){de[h?"unshift":"push"](()=>{i=h,r(2,i)})}return[u,v,i,f,d,n,y,w]}class on extends ke{constructor(t){super(),be(this,t,nn,rn,re,{})}}var sn="/assets/checkmark.24214891.svg";function an(e){let t,r,s,a,p,u,v,d,m,l,c,n,o,i,f,y,w,h;return{c(){t=P("main"),r=P("article"),s=P("img"),p=j(),u=P("h1"),u.textContent="Welcome to Live Lyrics for Spotify",v=j(),d=P("a"),m=R("Sign in with Spotify"),l=j(),c=P("input"),n=j(),o=P("label"),o.textContent="Automatically sign me in next time",qe(s.src,a=te)||g(s,"src",a),g(s,"class","logo svelte-niiqbe"),g(s,"alt","Live Lyrics for Spotify logo"),g(u,"class","svelte-niiqbe"),g(d,"href",e[0]),g(d,"class","svelte-niiqbe"),g(c,"type","checkbox"),g(c,"id","auto-auth"),g(c,"name","auto-auth"),c.checked=U.get("auto-auth")=="true",g(c,"class","svelte-niiqbe"),g(o,"for","auto-auth"),g(o,"class","svelte-niiqbe"),g(r,"class","svelte-niiqbe"),g(t,"class","flex-container svelte-niiqbe"),g(t,"style",`--checkmark:url("${sn}");`)},m(b,E){$(b,t,E),T(t,r),T(r,s),T(r,p),T(r,u),T(r,v),T(r,d),T(d,m),T(r,l),T(r,c),T(r,n),T(r,o),y=!0,w||(h=ge(c,"change",e[1]),w=!0)},p:I,i(b){y||(x(()=>{f&&f.end(1),i=qt(t,ve,{duration:250,delay:250}),i.start()}),y=!0)},o(b){i&&i.invalidate(),f=St(t,ve,{duration:250,delay:0}),y=!1},d(b){b&&A(t),b&&f&&f.end(),w=!1,h()}}}function ln(e){const t=new URLSearchParams;t.append("client_id",dr),t.append("response_type","token"),t.append("show_dialog","false"),t.append("redirect_uri",window.location.href),t.append("scope","user-modify-playback-state user-read-playback-state user-library-modify user-read-currently-playing user-library-read");const r="https://accounts.spotify.com/authorize?"+t.toString();Me(()=>{U.get("auto-auth")=="true"&&(window.location.href=r)});function s(a){U.set("auto-auth",JSON.stringify(a.currentTarget.checked),{expires:365})}return[r,s]}class cn extends ke{constructor(t){super(),be(this,t,ln,an,re,{})}}function un(e){let t,r;return t=new cn({}),{c(){Re(t.$$.fragment)},m(s,a){we(t,s,a),r=!0},i(s){r||(N(t.$$.fragment,s),r=!0)},o(s){ee(t.$$.fragment,s),r=!1},d(s){_e(t,s)}}}function fn(e){let t,r;return t=new on({}),{c(){Re(t.$$.fragment)},m(s,a){we(t,s,a),r=!0},i(s){r||(N(t.$$.fragment,s),r=!0)},o(s){ee(t.$$.fragment,s),r=!1},d(s){_e(t,s)}}}function pn(e){let t,r,s,a;const p=[fn,un],u=[];function v(d,m){return d[0]?0:1}return t=v(e),r=u[t]=p[t](e),{c(){r.c(),s=gt()},m(d,m){u[t].m(d,m),$(d,s,m),a=!0},p(d,[m]){let l=t;t=v(d),t!==l&&(rr(),ee(u[l],1,1,()=>{u[l]=null}),nr(),r=u[t],r||(r=u[t]=p[t](d),r.c()),N(r,1),r.m(s.parentNode,s))},i(d){a||(N(r),a=!0)},o(d){ee(r),a=!1},d(d){u[t].d(d),d&&A(s)}}}function dn(e,t,r){window.location.protocol==="http:"&&window.location.hostname!=="localhost"&&(window.location.protocol="https:"),ur({onOfflineReady(){},onRegistered(p){p&&setInterval(()=>{p.update()},60*60*1e3)}});const s=Lt(pr());Qt("auth_data",s);let a;return s.subscribe(p=>r(0,a=p)),[a]}class mn extends ke{constructor(t){super(),be(this,t,dn,pn,re,{})}}new mn({target:document.getElementById("app")});
